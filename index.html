<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>title</title>
    <!-- Load the Client component. -->
<script src="https://js.braintreegateway.com/web/3.26.0/js/client.min.js"></script>

<!-- Load the 3D Secure component. --><script src="https://js.braintreegateway.com/web/3.26.0/js/client.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.26.0/js/hosted-fields.min.js"></script>

<script src="https://js.braintreegateway.com/web/3.26.0/js/three-d-secure.min.js"></script>
  </head>
  <body>
  <div id="dropin-container">
    <input type="hidden" name="payment_method_nonce">
  </div>
  <button id="submit">Request payment method</button>

  <!--  <form action="/show" id="my-sample-form" method="post">
      <label for="card-number">Card Number</label>
      <div id="card-number"></div>

      <label for="cvv">CVV</label>
      <div id="cvv"></div>

      <label for="expiration-date">Expiration Date</label>
      <div id="expiration-date"></div>

      <input type="hidden" name="payment_method_nonce">

      <input type="submit" value="Pay" disabled />
    </form> -->
  <script>
  var clientToken = "eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiI0MjU5YjA5OGM4NWRhNzQwZWZjODc5NjU1MjVhNjcxNTA3MGNmNDg0NGExMzQ4NjJhNzlmNWM2NzNiZTYwOGE2fGNyZWF0ZWRfYXQ9MjAxNy0xMi0wNFQxOTo1MDo1Mi4yODI5Njg4MTErMDAwMFx1MDAyNm1lcmNoYW50X2lkPXFoY3Bud2t4ZHR0cnk5a2hcdTAwMjZwdWJsaWNfa2V5PWdzcXY4cnpqZGJjZjl0cXciLCJjb25maWdVcmwiOiJodHRwczovL2FwaS5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tOjQ0My9tZXJjaGFudHMvcWhjcG53a3hkdHRyeTlraC9jbGllbnRfYXBpL3YxL2NvbmZpZ3VyYXRpb24iLCJjaGFsbGVuZ2VzIjpbXSwiZW52aXJvbm1lbnQiOiJzYW5kYm94IiwiY2xpZW50QXBpVXJsIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzL3FoY3Bud2t4ZHR0cnk5a2gvY2xpZW50X2FwaSIsImFzc2V0c1VybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXV0aFVybCI6Imh0dHBzOi8vYXV0aC52ZW5tby5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tIiwiYW5hbHl0aWNzIjp7InVybCI6Imh0dHBzOi8vY2xpZW50LWFuYWx5dGljcy5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tL3FoY3Bud2t4ZHR0cnk5a2gifSwidGhyZWVEU2VjdXJlRW5hYmxlZCI6dHJ1ZSwicGF5cGFsRW5hYmxlZCI6dHJ1ZSwicGF5cGFsIjp7ImRpc3BsYXlOYW1lIjoiUGluayBTa2lubnkgQmVlciIsImNsaWVudElkIjoiQVJWOHlYRmpxOFRJR293aFdQeEk5OEhqdG1Ec2tFR25EZkt5X290MGhQRmxWX0ZIcHJyZDNvMTN4VXJKUXkzQUJ3TnVzQVZJNFJhYWlPeHoiLCJwcml2YWN5VXJsIjoiaHR0cDovL2V4YW1wbGUuY29tL3BwIiwidXNlckFncmVlbWVudFVybCI6Imh0dHA6Ly9leGFtcGxlLmNvbS90b3MiLCJiYXNlVXJsIjoiaHR0cHM6Ly9hc3NldHMuYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJhc3NldHNVcmwiOiJodHRwczovL2NoZWNrb3V0LnBheXBhbC5jb20iLCJkaXJlY3RCYXNlVXJsIjpudWxsLCJhbGxvd0h0dHAiOnRydWUsImVudmlyb25tZW50Tm9OZXR3b3JrIjpmYWxzZSwiZW52aXJvbm1lbnQiOiJvZmZsaW5lIiwidW52ZXR0ZWRNZXJjaGFudCI6ZmFsc2UsImJyYWludHJlZUNsaWVudElkIjoibWFzdGVyY2xpZW50MyIsImJpbGxpbmdBZ3JlZW1lbnRzRW5hYmxlZCI6dHJ1ZSwibWVyY2hhbnRBY2NvdW50SWQiOiJwaW5rc2tpbm55YmVlciIsImN1cnJlbmN5SXNvQ29kZSI6IlVTRCJ9LCJtZXJjaGFudElkIjoicWhjcG53a3hkdHRyeTlraCIsInZlbm1vIjoib2ZmIn0=";
    //var form = document.querySelector('#my-sample-form');
    var button = document.querySelector('#submit');
      //var submit = document.querySelector('input[type="submit"]');



braintree.client.create({
  // Use the generated client token to instantiate the Braintree client.
  authorization: clientToken
}, function (clientErr, clientInstance) {
  if (clientErr) {
    // Handle error in client creation
    return;
  } 
    braintree.threeDSecure.create({
    client: clientInstance
  }, function (threeDSecureErr, threeDSecureInstance) {
    if (threeDSecureErr) {
      // Handle error in 3D Secure component creation
      return;
    }

  var threeDSecure = threeDSecureInstance;
braintree.dropin.create({
authorization: clientToken,
container: '#dropin-container'
}, function(createErr,instance){
  if (createErr) {
  console.error(createErr);
  return;
}
  // braintree.hostedfields.create({
  //         client: clientInstance,
  //         styles: {
  //           'input': {
  //             'font-size': '14px'
  //           },
  //           'input.invalid': {
  //             'color': 'red'
  //           },
  //           'input.valid': {
  //             'color': 'green'
  //           }
  //         },
  //         fields: {
  //           number: {
  //             selector: '#card-number',
  //             placeholder: '4111 1111 1111 1111'
  //           },
  //           cvv: {
  //             selector: '#cvv',
  //             placeholder: '123'
  //           },
  //           expirationDate: {
  //             selector: '#expiration-date',
  //             placeholder: '10/2019'
  //           }
  //         }
  //       }, function (hostedFieldsErr, hostedFieldsInstance) {
  //         if (hostedFieldsErr) {
  //           console.error(hostedFieldsErr);
  //           return;
  //         }

          //submit.removeAttribute('disabled');

          button.addEventListener('click', function (event) {
            event.preventDefault();

            instance.requestPaymentMethod(function (requestPaymentMethodErr, payload) {
              if (requestPaymentMethodErr) {
                console.error(requestPaymentMethodErr);
                return;
              }
              console.log('Got a nonce: ' + payload.nonce);
              document.querySelector('input[name="payment_method_nonce"]').value = payload.nonce;
              var my3DSContainer = document.createElement('modal');
						threeDSecure.verifyCard({
						  amount: '500.00',
						  nonce: payload.nonce,
						  addFrame: function (err, iframe) {
						    // Set up your UI and add the iframe.
						    my3DSContainer.appendChild(iframe);
						    document.body.appendChild(my3DSContainer);
						  },
						  removeFrame: function () {
						    // Remove UI that you added in addFrame.
						    document.body.removeChild(my3DSContainer);
						  }
						}, function (err, response) {
						  // Send response.nonce to use in your transaction
						});
              
                  });
          }, false);
        });
  });
});
 
</script>
    <script>
  



              
              // form.submit();
              // If this was a real integration, this is where you would
              // send the nonce to your server.
              
        